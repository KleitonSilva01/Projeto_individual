<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comece sua nova experiência</title>
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <div class="header">
        <div class="container_home">
            <a href="index.html"> <img src="./img/Feelings.png" class="logo_home"></a>
            <ul class="Navbar_home">
                <li>
                    <a href="Home.html">Home</a>
                </li>
                </li>
                <li>
                    <a href="graficos.html"> Top playlist </a>
                </li>
                <li>
                    <a href="./dashboard/mural.html">Deixe seu comentário</a>
                </li>
                |
                <li>
                    <a href="index.html">Sair</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="container_play">
        <div class="banner_playlist">
            <div class="box">
                Selecione a categoria que quer ouvir <br>  <select id="lista_play" onchange="musicas()">

                    <option value=""> Selecione

                    </option>


                    <option value="play_sofrencia"> Músicas para sofrer


                    </option>
                    <option value="play_animada"> Músicas animadas

                    </option>
                    <option value="play_paz"> Músicas para relaxar

                    </option>

                </select>
            </div>
            <div class="display_video">

                <div class="display">
                    <div class=imagem>
                        <img style= "display:none"id="imagem_play" src="">
                    </div>
                </div>

                <div class="videos_youtube">
                    <iframe id="video" width="560" height="315" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"  style="display: none;"></iframe>    
                    
                </div>

            </div>

        </div>
    </div>

    <div class="votacao">
        <div class="box_votacao">
            Selecione sua categoria favorita
            <select id="lista_votacao">
                <option value="">Selecione</option>
                <option name="opt" value="101">Sofrência</option>
                <option name="opt" value="102">Animada</option>
                <option name="opt" value="103">Relaxar</option>
            </select>
            <br><br><br>
            <button onclick="enviar()">Enviar categoria favorita</button>
        </div>
    </div>

</body>

</html>

<script>
    function musicas() {
        var lista_playlist = lista_play.value;
        if (lista_playlist == "") {
            video.style.display = "none"
            imagem_play.src = "";
            video.src = ""
        }  else if (lista_playlist == "play_sofrencia") {

            video.style.display = "block"
            imagem_play.style.display = "block"

            imagem_play.src = "./img/sofrencia.jpg";
            video.src = "https://www.youtube.com/embed/H1DEczvTjgE"

        } else if (lista_playlist == "play_paz") {

            video.style.display = "block"
            imagem_play.style.display = "block"

            imagem_play.src = "./img/paz.JFIF";
            video.src = "https://www.youtube.com/embed/6cNTT-K6PZQ"
        } else if (lista_playlist == "play_animada") {

            video.style.display = "block"
            imagem_play.style.display = "block"

            imagem_play.src = "./img/animada.jpg";
            video.src = "https://www.youtube.com/embed/d3KaQ-KvQUQ"
        }

    }
</script>

<script>
    
    
        function enviar() {
            
        var idUsuario = sessionStorage.ID_USUARIO;
        var categoria = lista_votacao.value;

        fetch(`/categoria/cadastrar/${categoria}`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: null

        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                window.alert("Curtida realizado com sucesso!");
                window.location = "/playlist.html";
                limparFormulario();
                finalizarAguardar();
            } else {
                throw ("Houve um erro ao tentar realizar a curtida!");
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            finalizarAguardar();
        });
    }

</script>